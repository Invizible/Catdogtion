<div bsModal #lotModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" (click)="lotModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">Add Lot</h4>
      </div>

      <div class="modal-body">
        <form (ngSubmit)="save()">
          <!-- Name -->
          <div class="form-group required">
            <label for="name" class="control-label">Name</label>
            <input type="text" class="form-control" id="name"
                   required
                   [(ngModel)]="lot.name" name="name" #name="ngModel">
            <p [hidden]="name.valid || name.pristine" class="alert alert-danger">
              Name is required
            </p>
          </div>

          <!-- Description -->
          <div class="form-group required">
            <label for="description" class="control-label">Description</label>
            <textarea class="form-control" id="description" rows="10"
                      required
                      [(ngModel)]="lot.description" name="description" #description="ngModel">
                </textarea>
            <p [hidden]="description.valid || description.pristine" class="alert alert-danger">
              Description is required
            </p>
          </div>

          <!-- Starting price -->
          <div class="form-group required">
            <label for="startingPrice" class="control-label">Starting price</label>
            <input type="number" class="form-control" id="startingPrice"
                   required
                   [(ngModel)]="lot.startingPrice" name="startingPrice" #startingPrice="ngModel">
            <p [hidden]="startingPrice.valid || startingPrice.pristine" class="alert alert-danger">
              Starting price is required
            </p>
          </div>

          <!-- Images -->
          <div ng2FileDrop
               [ngClass]="{'nv-file-over': hasDropZoneOver}"
               (fileOver)="fileOverBase($event)"
               [uploader]="uploader"
               class="well my-drop-zone">
            Choose your photos or drop here
            <input type="file" ng2FileSelect [uploader]="uploader" multiple  />
          </div>

          <table class="table">
            <thead>
            <tr>
              <th width="50%">Name</th>
              <th>Status</th>
              <th></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of uploader.queue">
              <td><strong>{{ item?.file?.name }}</strong></td>
              <td class="text-center">
                <span *ngIf="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                <span *ngIf="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                <span *ngIf="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
              </td>
              <td nowrap>
                <button type="button" class="btn btn-danger btn-xs"
                        (click)="item.remove()">
                  <span class="glyphicon glyphicon-trash"></span> Remove
                </button>
              </td>
            </tr>
            </tbody>
          </table>

          <div>
            <div>
              Progress:
              <div class="progress" style="">
                <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
              </div>
            </div>
            <button type="button" class="btn btn-success btn-s"
                    (click)="uploader.uploadAll()" [disabled]="!uploader.getNotUploadedItems().length">
              <span class="glyphicon glyphicon-upload"></span> Upload all
            </button>
            <button type="button" class="btn btn-danger btn-s"
                    (click)="uploader.clearQueue()" [disabled]="!uploader.queue.length">
              <span class="glyphicon glyphicon-trash"></span> Remove all
            </button>
          </div>

          <!-- Characteristics -->
          <p>//TODO: Characteristics</p>

          <button type="submit" class="btn btn-success">Ok</button>
        </form>
      </div>
    </div>
  </div>
</div>
